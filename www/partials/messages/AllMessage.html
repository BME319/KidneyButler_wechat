<ion-view title="消息中心" >

  <ion-nav-bar class="bar-dark" >
      <ion-nav-buttons class="bar-dark nav-title-slide-ios7" side="left" >
         <button class="button button-clear"  ng-click="Goback()"><i class="icon ion-chevron-left"></i>返回</button>
      </ion-nav-buttons>
    </ion-nav-bar>


  <div  style="position: absolute;top: 43px;z-index:100;display: block;height: 2.5px;background-color: #33cd5f;{{barwidth}}" ></div>
  <ion-content padding="true" style="">
    <div class="card" ng-if="!(pay||alert||task||insurance||chats.length)">
        <div class="item item-text-wrap">
            暂时没有消息
        </div>
    </div>

    <ion-list>

      <!-- 支付消息 -->
      <ion-item class="item-thumbnail-left item-text-wrap" ng-if="pay" ng-click="getMessageDetail(pay)">
        <img ng-src="img/payment.png" image-red-point="!pay.readOrNot">
        <div class="row">
            <h2 class="col" style="margin-top: 10px;">支付消息</h2>
            <span class="col" style="margin-top: 10px;text-align: right;">{{pay.time|dateFormat:"YYYY-MM-DD h:m"}}</span>
        </div>
        <span class="row" style="margin-left:5px;">{{pay.description}}</span>
      </ion-item>

      <!-- 警报消息 -->
      <ion-item class="item-thumbnail-left item-text-wrap" ng-if="alert"  ng-click="getMessageDetail(alert)">
        <img ng-src="img/alert.png" image-red-point="!alert.readOrNot">
        <div class="row">
            <h2 class="col" style="margin-top: 10px;">警报消息</h2>
            <span class="col" style="margin-top: 10px;text-align: right;">{{alert.time|dateFormat:"YYYY-MM-DD h:m"}}</span>
        </div>
        <span class="row" style="margin-left:5px;">{{alert.description}}</span>
      </ion-item>

      <!-- 任务消息 -->
      <ion-item class="item-thumbnail-left item-text-wrap" ng-if="task" ng-click="getMessageDetail(task)">
        <img ng-src="img/task.png" image-red-point="!task.readOrNot">
        <div class="row">
            <h2 class="col" style="margin-top: 10px;">任务消息</h2>
            <span class="col" style="margin-top: 10px;text-align: right;">{{task.time|dateFormat:"YYYY-MM-DD h:m"}}</span>
        </div>
        <span class="row" style="margin-left:5px;">{{task.description}}</span>
      </ion-item>

      <!-- 保险消息 -->
      <ion-item class="item-thumbnail-left item-text-wrap" ng-if="insurance" ng-click="getMessageDetail(insurance)">
        <img ng-src="img/security.png" image-red-point="!insurance.readOrNot">
        <div class="row">
            <h2 class="col" style="margin-top: 10px;">保险消息</h2>
            <span class="col" style="margin-top: 10px;text-align: right;">{{insurance.time|dateFormat:"YYYY-MM-DD h:m"}}</span>
        </div>
        <span class="row" style="margin-left:5px;">{{insurance.description}}</span>
      </ion-item>

      <!-- 聊天消息 -->
      <ion-item  ng-repeat="chat in chats"  class="item-thumbnail-left" ng-click="getConsultRecordDetail(chat)">
        <img ng-src="{{chat.docPhoto}}" image-red-point="!chat.readOrNot">
        <div class="row">
            <h2 class="col" style="margin-top: 10px;">{{chat.docName}}</h2>
            <span class="col" style="margin-top: 10px;text-align: right;">{{chat.time|dateFormat:"YYYY-MM-DD h:m"}}</span>
        </div>
        <span class="row" style="margin-left:5px;">{{chat.description}}</span>
      </ion-item>


    </ion-list> 
    <ion-refresher pulling-text="下拉刷新..." on-refresh="do_refresher()"></ion-refresher>
  </ion-content>
          
</ion-view>
<!-- <ion-view title="消息中心" >

  <ion-nav-bar class="bar-dark nav-title-slide-ios7" style="" >
      <ion-nav-buttons class="bar-dark nav-title-slide-ios7" side="left" >
         <button class="button button-clear"  ng-click="Goback()"><i class="icon ion-chevron-left"></i>返回</button>
      </ion-nav-buttons>
    </ion-nav-bar>


  <div  style="position: absolute;top: 43px;z-index:100;display: block;height: 2.5px;background-color: #33cd5f;{{barwidth}}" ></div>
  <ion-content padding="true" style="">

    <ion-list>
      <ion-item ng-repeat="message in messages" class="item-thumbnail-left item-text-wrap" ng-click="getMessageDetail({{message.type}})">
        <img image-red-point='true' ng-src="{{message.img}}">
        <h2>{{message.name}}</h2>
        <p style="text-align: right">{{message.time}}</p>
        <p>{{message.response}}</p>
      </ion-item>

      <ion-item ng-repeat="consult in consults" class="item-thumbnail-left item-text-wrap" ng-click="getConsultRecordDetail($event,consult.docId)">
        <img ng-src="{{consult.img}}">
        <h2>{{consult.name}}</h2>
        <p style="text-align: right">{{consult.time}}</p>
        <p>{{consult.response}}</p>
      </ion-item>


    </ion-list>
    
    
    


           
  </ion-content>
          
</ion-view> -->